<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" charset="UTF-8">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login Project</title>
</head>
<body>
    <div>
        <h2>home page</h2>
        <h2>[[${loginType}]]</h2>
    </div>
    <div th:if="${user == null}">
        <a th:href="|@{/{loginType}/login(loginType=${loginType})}|">로그인</a><br>
<!--        /oauth2/authorization/{provider} 는 프론트가 백엔드로 소셜로그인 요청을 보내는 URI
            http.oauth2Login().authorizationEndpoint().baseUri("바꾸고 싶은 uri") 로 변경 가능-->
        <a href="/oauth2/authorization/google">구글 로그인</a><br>
        <a href="/oauth2/authorization/facebook">페이스북 로그인</a><br>
        <a href="/oauth2/authorization/naver">네이버 로그인</a><br>
        <a href="/oauth2/authorization/kakao">카카오 로그인</a><br>
        <a th:href="|@{/{loginType}/create(loginType=${loginType})}|">회원가입</a>
    </div>
    <div th:unless="${user == null}">
        <p>안녕하세요</p>
<!--        <h3 th:each="user:${users}">[[${user.name}]]님 환영합니다!</h3>-->
        <h3>[[${user.name}]]님 환영합니다!</h3>
        <div>
            <button th:onclick="|location.href='@{/{loginType}/admin (loginType=${loginType})}'|">관리자 페이지</button>
        </div>
        <div>
            <button th:onclick="|location.href='@{/{loginType}/user (loginType=${loginType})}'|">사용자 정보</button>
        </div>
        <div>
            <button th:if="${loginType == 'security-login'}" th:onclick="|location.href='@{/logout (loginType=${loginType})}'|">로그아웃</button>
            <button th:unless="${loginType == 'security-login'}" th:onclick="|location.href='@{/{loginType}/logout (loginType=${loginType})}'|">로그아웃</button>
        </div>
    </div>
</body>
<script th:inline="javascript">
    console.log([[${user}]]);
</script>
</html>